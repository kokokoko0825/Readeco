# 楽天ブックスAPI セットアップガイド

このアプリでは、楽天ブックスAPIを使用して本を検索する機能を実装しています。

## 1. 楽天開発者サイトでのアプリ登録

### ステップ1: 楽天開発者サイトにアクセス

1. https://webservice.rakuten.co.jp/app/create にアクセスします
2. 楽天IDでログインします（まだアカウントがない場合は新規登録が必要です）

### ステップ2: 新規アプリ登録

アプリ登録フォームで以下の情報を入力します：

#### **アプリ名**
```
Readeco
```
または、より詳細に：
```
Readeco - 読書管理アプリ
```

**説明：** 
- アプリ名は自由に設定できますが、わかりやすい名前にすることをおすすめします
- 他の人がすでに使っている名前でも問題ありません（アプリケーションIDは一意に生成されます）

#### **アプリURL**
```
https://github.com/YOUR_USERNAME/Readeco
```
または、アプリがまだGitHubにない場合：
```
https://example.com/readeco
```

**説明：**
- アプリURLは実際にアプリがホストされている場所を示すURLです
- GitHubリポジトリのURL、公式サイトのURL、または任意のURLを入力できます
- 開発中のアプリの場合は、プレースホルダーURLでも問題ありません
- 必須項目ですが、後で変更することも可能です

#### **リダイレクトURL**
通常は空欄のままで問題ありません。OAuth認証を使用する場合のみ入力が必要です。

#### **コールバックURL**
通常は空欄のままで問題ありません。

### ステップ3: アプリ登録完了

1. フォームを送信すると、**アプリケーションID**が発行されます
2. このアプリケーションIDは、APIリクエストに必要です
3. アプリケーションIDは後からでも確認できます（マイページ > アプリ一覧）

## 2. アプリケーションIDの設定

取得したアプリケーションIDを、以下のいずれかの方法で設定します：

### 方法1: 環境変数を使用（推奨）

1. プロジェクトのルートディレクトリに `.env` ファイルを作成します：

```env
RAKUTEN_APPLICATION_ID=YOUR_APPLICATION_ID_HERE
```

2. `utils/rakuten-api.ts` を以下のように修正します：

```typescript
const applicationId = process.env.RAKUTEN_APPLICATION_ID || 'YOUR_APPLICATION_ID';
```

**注意：** `.env` ファイルは `.gitignore` に追加して、Gitにコミットしないようにしてください。

### 方法2: 直接コードに記述（開発用）

`utils/rakuten-api.ts` ファイルの `searchBookByISBN` 関数内で、直接アプリケーションIDを設定します：

```typescript
const applicationId = 'YOUR_APPLICATION_ID_HERE';
```

## 3. APIの使用制限

楽天ブックスAPIには以下の制限があります：

- **リクエスト数：** 1秒間に1リクエスト
- **1日のリクエスト数：** アプリ登録時のプランによって異なります（通常は10,000リクエスト/日）
- **利用料金：** 無料（商用利用も可能）

## 4. 必要なパッケージのインストール

以下のコマンドで必要なパッケージをインストールしてください：

```bash
npx expo install expo-barcode-scanner expo-camera
```

## 5. 動作確認

1. アプリケーションIDを設定したら、アプリを起動します
2. 「登録」タブから「バーコードを読み込む」をタップします
3. カメラの権限を許可します
4. 本のバーコードをスキャンします
5. 本の情報が表示されれば成功です

## トラブルシューティング

### エラー: 「本が見つかりませんでした」

- ISBNコードが正しく読み取れていない可能性があります
- 楽天ブックスのデータベースに該当する本がない可能性があります
- アプリケーションIDが正しく設定されているか確認してください

### エラー: 「API request failed」

- アプリケーションIDが正しく設定されているか確認してください
- インターネット接続を確認してください
- APIの利用制限に達していないか確認してください

## 参考リンク

- [楽天開発者サイト](https://webservice.rakuten.co.jp/)
- [楽天ブックスAPI ドキュメント](https://webservice.rakuten.co.jp/api/booksbooksearch/)
- [楽天API利用規約](https://webservice.rakuten.co.jp/api_terms/)


